<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- css -->
  <link rel="stylesheet" href="js/element-2.4.11/theme-chalk/index.css">
  <link rel="stylesheet" href="css/fontawesome5.6.3/css/all.css">
  <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="arcgis_js_api/library/4.5/dijit/themes/claro/claro.css" />
    <link rel="stylesheet" href="arcgis_js_api/library/4.5/esri/css/main.css" />
</head>
<body class="animated fadeIn">
  <div id="app">
  	
  	<div v-show="!preloading" class="el-loading-mask" style="background-color: rgba(255,255,255,1);">
	   <div class="el-loading-spinner">
	    <i class="fa fa-spinner fa-pulse"></i>
 	    <p class="el-loading-text">Loading...</p>
	   </div>
    </div>
    
    <section style="padding: 20px;" v-show="preloading">
		<!-- filter -->
		<el-row>
		<el-col :span="24" class="toolbar" style="padding-bottom: 0px;">
			<el-col :span="24">
			<el-tabs value="filter" >
			    <el-tab-pane label="筛选" name="filter" disabled>
			    <el-form size="mini" :inline="true" :model="filters" style="float: right;">
					<el-form-item>
						  <el-input v-model="filters.sApp_NO" placeholder="请输入应用编码" clearable></el-input>
					</el-form-item>
					<el-form-item>
						  <el-input v-model="filters.sApp_Name" placeholder="请输入应用名称" clearable></el-input>
					</el-form-item>
					<el-form-item>
						<el-button type="primary" title="查询" @click="query" icon="fa fa-search"></el-button>
						<el-button @click="reset"  title="重置" icon="fas fa-redo"></el-button>
						&nbsp;&nbsp;&nbsp;&nbsp;
						<el-button type="primary" title="导入" @click="getImport" icon="fas fa-file-import"></el-button>
						<el-button type="primary" title="导出" @click="getExcel" icon="fas fa-file-export"></el-button>
						&nbsp;&nbsp;&nbsp;&nbsp;
						<el-button type="primary" title="新增" @click="handleAdd" icon="fas fa-plus"></el-button>
					</el-form-item>
				</el-form>
			    </el-tab-pane>
		    </el-tabs>
				
			</el-col>
		</el-col>
		</el-row>
		
	    <el-tabs v-model="activeTab" >
		    <el-tab-pane label="结果" name="table" disabled>
				<div id="mapView" style="width: 100%;height: 500px;"></div>
			</el-tab-pane>
		  </el-tabs>
		
		
		<!-- add -->
		<el-dialog title="新增" :visible.sync="addFormVisible" :close-on-click-modal="false">	
			<el-form size="mini" :model="addForm" :rules="addFormRules" ref="addForm" label-width="120px">
			  <el-form-item label="应用名称" prop="sApp_Name">
			    <el-input v-model="addForm.sApp_Name"></el-input>
			  </el-form-item>
			  <el-form-item label="应用编码" prop="sApp_NO">
			    <el-input v-model="addForm.sApp_NO">
			    	<el-button slot="append" icon="fas fa-random" @click="handleRandom('addForm', 'sApp_NO')">随机生成</el-button>
			    </el-input>
			  </el-form-item>
			  <el-form-item label="应用秘钥" prop="sApp_SecretKey">
			    <el-input v-model="addForm.sApp_SecretKey">
			    	<el-button slot="append" icon="fas fa-random" @click="handleRandom('addForm', 'sApp_SecretKey')">随机生成</el-button>
			    </el-input>
			  </el-form-item>
			  <el-form-item label="状态" prop="lApp_StatusFlag">
			     <el-switch v-model="addForm.lApp_StatusFlag" :active-value="1" :inactive-value="0"></el-switch>
			  </el-form-item>
			</el-form>
			<div slot="footer" class="dialog-footer">
				<el-button size="mini" @click="addClose">取消</el-button>
				<el-button size="mini" type="primary" @click="addSubmit" :loading="addLoading">提交</el-button>
			</div>
		</el-dialog>
		
		<!-- edit -->
		<el-dialog title="编辑" :visible.sync="editFormVisible" :close-on-click-modal="false">
			<el-form size="mini" :model="editForm" :rules="editFormRules" ref="editForm" label-width="120px">
			  <el-form-item label="应用名称" prop="sApp_Name">
			    <el-input v-model="editForm.sApp_Name"></el-input>
			  </el-form-item>
			  <el-form-item label="应用编码" prop="sApp_NO">
			    <el-input v-model="editForm.sApp_NO">
			    	<el-button slot="append" icon="fas fa-random" @click="handleRandom('editForm', 'sApp_NO')">随机生成</el-button>
			    </el-input>
			  </el-form-item>
			  <el-form-item label="应用秘钥" prop="sApp_SecretKey">
			    <el-input v-model="editForm.sApp_SecretKey">
			    	<el-button slot="append" icon="fas fa-random" @click="handleRandom('editForm', 'sApp_SecretKey')">随机生成</el-button>
			    </el-input>
			  </el-form-item>
			  <el-form-item label="状态" prop="lApp_StatusFlag">
			     <el-switch v-model="editForm.lApp_StatusFlag" :active-value="1" :inactive-value="0"></el-switch>
			  </el-form-item>
			</el-form>
			<div slot="footer" class="dialog-footer">
				<el-button size="mini" @click="editClose">取消</el-button>
				<el-button size="mini" type="primary" @click="editSubmit" :loading="editLoading">提交</el-button>
			</div>
		</el-dialog>
		
	</section>
  </div>
</body>
  <script src="js/jquery-3.4.1.js" type="text/javascript"></script>
  <script src="js/vue-2.6.10/vue.js" type="text/javascript"></script>
  <script src="js/element-2.4.11/index.js" type="text/javascript"></script>
  
  <script>
 	//var Center = {lat:30.8506,lon:124.9598};
   var ArGis = {
   		baseUrl: "arcgis_js_api/library/4.5"
   };
	</script>
  <script src="arcgis_js_api/library/4.5/init.js"></script>
    
  <script type="text/javascript" src="js/global.js"></script>
  <script type="text/javascript" src="js/map.js"></script>
   <script type="text/javascript">
    require([
      "esri/Map",
      "esri/views/MapView",
      "esri/layers/MapImageLayer"
    ], function(Map, MapView, MapImageLayer) {

      var map = new Map({
        basemap: "topo-vector"
      });
      
      /* var layer = new MapImageLayer({
        url: "http://101.230.249.90:7002/OneMapServer/rest/services/tideport/MapServer"
      }); */

      var view = new MapView({
        container: "mapView",
        map: map,
        center: [-118.71511,34.09042],
        zoom: 11
      });

    });
  </script>
</html>